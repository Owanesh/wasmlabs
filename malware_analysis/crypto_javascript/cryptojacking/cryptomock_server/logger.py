import logging
import os
from datetime import datetime

class CustomFormatter(logging.Formatter):
    def format(self, record):
        return super().format(record)

def setup_logger():
    log_dir = "logs"
    os.makedirs(log_dir, exist_ok=True)
    timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
    log_path = os.path.join(log_dir, f"{timestamp}.log")

    formatter = CustomFormatter("%(asctime)s [%(levelname)s] %(message)s")

    handlers = [
        logging.FileHandler(log_path),
        logging.StreamHandler()
    ]

    for handler in handlers:
        handler.setFormatter(formatter)

    logging.basicConfig(
        level=logging.INFO,
        handlers=handlers
    )
